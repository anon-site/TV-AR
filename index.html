<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>القنوات الفضائية العربية</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-satellite-dish"></i>
                    <h1>القنوات العربية</h1>
                </div>
                <div class="header-center">
                    <!-- Search Container in Header -->
                    <div class="header-search-container">
                        <input type="text" class="header-search-input" placeholder="البحث عن قناة..." id="searchInput">
                        <i class="fas fa-search header-search-icon"></i>
                    </div>
                    
                    <!-- Filters in Header -->
                    <div class="header-filters" id="headerFilters">
                        <button class="header-filter-btn" id="countryFilterBtn">
                            <i class="fas fa-globe"></i>
                            <span>البلد</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <button class="header-filter-btn" id="favoritesFilterBtn">
                            <i class="fas fa-heart"></i>
                            <span>المفضلة</span>
                        </button>
                    </div>
                </div>

                <div class="header-actions">
                    <button class="mobile-menu-btn" onclick="app.toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="settings-btn desktop-only" onclick="openSettings()">
                        <i class="fas fa-cog"></i>
                        الإعدادات
                    </button>
                    <button class="admin-btn desktop-only" onclick="openAdminPanel()">
                        <i class="fas fa-user-shield"></i>
                        لوحة التحكم
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Search and Filters (Outside Sidebar) -->
    <div class="mobile-search-filters-bar" id="mobileSearchFiltersBar">
        <div class="container">
            <div class="mobile-search-section">
                <div class="mobile-search-input-container">
                    <input type="text" class="mobile-main-search-input" placeholder="البحث عن قناة..." id="mobileMainSearchInput">
                    <i class="fas fa-search mobile-main-search-icon"></i>
                </div>
            </div>
            <div class="mobile-filters-section">
                <button class="mobile-main-filter-btn" id="mobileMainCountryFilter">
                    <i class="fas fa-globe"></i>
                    <span>البلد: الكل</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <button class="mobile-main-filter-btn" id="mobileMainFavoritesFilter">
                    <i class="fas fa-heart"></i>
                    <span>المفضلة</span>
                    <span class="mobile-main-favorites-count" id="mobileMainFavoritesCount">0</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Filter Dropdowns -->
    <div class="header-filter-dropdown" id="countryDropdown">
        <div class="filter-dropdown-content">
            <div class="filter-option" data-country="all">جميع البلدان</div>
            <div class="filter-option" data-country="قطر">قطر</div>
            <div class="filter-option" data-country="الإمارات">الإمارات</div>
            <div class="filter-option" data-country="السعودية">السعودية</div>
            <div class="filter-option" data-country="لبنان">لبنان</div>
            <div class="filter-option" data-country="مصر">مصر</div>
            <div class="filter-option" data-country="بريطانيا">بريطانيا</div>
        </div>
    </div>
    


    <!-- Breadcrumbs -->
    <div class="breadcrumbs-container">
        <div class="container">
            <nav class="breadcrumbs" id="breadcrumbs">
                <a href="#" class="breadcrumb-item active" data-category="all">
                    <i class="fas fa-home"></i>
                    الرئيسية
                </a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current" id="currentBreadcrumb">جميع القنوات</span>
                <div class="channel-stats" id="channelStats">
                    <span class="stats-text">عدد القنوات: <strong id="channelCount">0</strong></span>
                </div>
            </nav>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navigation">
        <div class="container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-category="all">
                    <i class="fas fa-th-large"></i>
                    جميع القنوات
                </button>
                <button class="nav-tab" data-category="news">
                    <i class="fas fa-newspaper"></i>
                    الأخبار
                </button>
                <button class="nav-tab" data-category="entertainment">
                    <i class="fas fa-film"></i>
                    الترفيه
                </button>
                <button class="nav-tab" data-category="sports">
                    <i class="fas fa-futbol"></i>
                    الرياضة
                </button>
                <button class="nav-tab" data-category="religious">
                    <i class="fas fa-mosque"></i>
                    الدينية
                </button>
                <button class="nav-tab" data-category="music">
                    <i class="fas fa-music"></i>
                    الموسيقى
                </button>
            </div>

        </div>

    </nav>

    <!-- Mobile Sidebar -->
    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="mobile-sidebar-header">
            <h3>القائمة</h3>
            <button class="mobile-close-btn" onclick="app.toggleMobileMenu()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-nav-tabs">
            <button class="mobile-nav-tab active" data-category="all">
                <i class="fas fa-th-large"></i>
                جميع القنوات
            </button>
            <button class="mobile-nav-tab" data-category="news">
                <i class="fas fa-newspaper"></i>
                الأخبار
            </button>
            <button class="mobile-nav-tab" data-category="entertainment">
                <i class="fas fa-film"></i>
                الترفيه
            </button>
            <button class="mobile-nav-tab" data-category="sports">
                <i class="fas fa-futbol"></i>
                الرياضة
            </button>
            <button class="mobile-nav-tab" data-category="religious">
                <i class="fas fa-mosque"></i>
                الدينية
            </button>
            <button class="mobile-nav-tab" data-category="music">
                <i class="fas fa-music"></i>
                الموسيقى
            </button>
        </div>
        <div class="mobile-sidebar-actions">
            <button class="mobile-sidebar-action-btn" onclick="openSettings(); app.closeMobileMenu();">
                <i class="fas fa-cog"></i>
                <span>الإعدادات</span>
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="mobile-sidebar-action-btn" onclick="openAdminPanel(); app.closeMobileMenu();">
                <i class="fas fa-user-shield"></i>
                <span>لوحة التحكم</span>
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div class="mobile-sidebar-overlay" id="mobileSidebarOverlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="channels-grid" id="channelsGrid">
                <!-- Channels will be dynamically loaded here -->
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>جارٍ تحميل القنوات...</p>
    </div>

    <!-- Video Modal -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="channelTitle">قناة</h3>
                <div class="modal-controls">
                    <div class="quality-control-container">
                        <button class="quality-btn" onclick="toggleQualityMenu()">
                            <i class="fas fa-video"></i>
                            <span id="qualityText">جودة البث</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="quality-menu" id="qualityMenu">
                            <div class="quality-option active" data-quality="auto">
                                <i class="fas fa-magic"></i>
                                <span>تلقائي</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="1080">
                                <i class="fas fa-video"></i>
                                <span>1080p - عالي جداً</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="720">
                                <i class="fas fa-video"></i>
                                <span>720p - عالي</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="480">
                                <i class="fas fa-video"></i>
                                <span>480p - متوسط</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="360">
                                <i class="fas fa-video"></i>
                                <span>360p - توفير البيانات</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                        </div>
                    </div>
                    <button class="pip-btn" onclick="togglePictureInPicture()" title="إخراج الشاشة خارج المتصفح">
                        <i class="fas fa-external-link-alt"></i>
                    </button>
                    <button class="fullscreen-btn" onclick="toggleFullscreen()">
                        <i class="fas fa-expand"></i>
                    </button>
                    <button class="close-btn" onclick="closeModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="video-container">
                <video id="videoPlayer" controls autoplay>
                    <source id="videoSource" src="" type="application/x-mpegURL">
                    متصفحك لا يدعم تشغيل الفيديو
                </video>
                <div class="video-loading" id="videoLoading">
                    <div class="spinner"></div>
                    <p>جارٍ تحميل البث...</p>
                </div>
                <!-- News Ticker -->
                <div class="news-ticker" id="newsTicker">
                    <div class="news-ticker-label">
                        <i class="fas fa-newspaper"></i>
                        آخر الأخبار
                    </div>
                    <div class="news-ticker-content">
                        <div class="news-ticker-text" id="newsTickerText">
                            عاجل: القمة العربية تناقش أهم القضايا الإقليمية والدولية • • • مؤتمر دولي حول التغيرات المناخية يبدأ أعماله في دبي • • • ارتفاع أسعار النفط في الأسواق العالمية • • • منتخب مصر يحقق فوزاً مهماً في تصفيات كأس العالم • • • افتتاح معرض الكتاب الدولي في الرياض • • • إنجازات جديدة في مجال الطاقة المتجددة بدول الخليج
                        </div>
                    </div>
                </div>
                <!-- Channel Logo Overlay -->
                <div class="channel-logo-overlay" id="channelLogoOverlay">
                    <img id="overlayLogo" src="" alt="شعار القناة">
                </div>
                <!-- Live Indicator -->
                <div class="live-indicator">
                    <span class="live-dot"></span>
                    مباشر
                </div>
                <!-- Quality Display -->
                <div class="quality-display" id="qualityDisplay">
                    <i class="fas fa-video"></i>
                    <span id="currentQualityText">تلقائي</span>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content settings-content">
            <div class="modal-header">
                <h3>الإعدادات</h3>
                <button class="close-btn" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-body">
                <div class="setting-item">
                    <label for="autoQuality">جودة تلقائية حسب سرعة الإنترنت</label>
                    <label class="switch">
                        <input type="checkbox" id="autoQuality" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label for="autoplay">تشغيل تلقائي</label>
                    <label class="switch">
                        <input type="checkbox" id="autoplay" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <label for="volume">مستوى الصوت</label>
                    <input type="range" id="volume" min="0" max="100" value="80" class="volume-slider">
                </div>
                <div class="setting-item">
                    <label for="theme">نمط التطبيق</label>
                    <select id="theme" class="theme-select">
                        <option value="dark">داكن</option>
                        <option value="light">فاتح</option>
                        <option value="auto">تلقائي</option>
                    </select>
                </div>
                
                <!-- Appearance Customization Section -->
                <div class="settings-section">
                    <h4 class="settings-section-title">🎨 تخصيص المظهر</h4>
                    
                    <div class="setting-item">
                        <label for="zoomLevel">حجم المحتوى</label>
                        <div class="zoom-control">
                            <input type="range" id="zoomLevel" min="75" max="150" value="100" step="5" class="zoom-slider">
                            <span id="zoomValue" class="zoom-value">100%</span>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <label for="colorTheme">نظام الألوان</label>
                        <select id="colorTheme" class="color-theme-select">
                            <option value="default">الافتراضي</option>
                            <option value="blue">أزرق</option>
                            <option value="green">أخضر</option>
                            <option value="purple">بنفسجي</option>
                            <option value="orange">برتقالي</option>
                            <option value="red">أحمر</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="fontSize">حجم النص</label>
                        <select id="fontSize" class="font-size-select">
                            <option value="small" selected>صغير</option>
                            <option value="medium">متوسط</option>
                            <option value="large">كبير</option>
                            <option value="xlarge">كبير جداً</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="borderRadius">شكل الحواف</label>
                        <select id="borderRadius" class="border-radius-select">
                            <option value="minimal">مربع</option>
                            <option value="normal">عادي</option>
                            <option value="rounded" selected>مدور</option>
                        </select>
                    </div>
                </div>
                
                <!-- Layout and Behavior Section -->
                <div class="settings-section">
                    <h4 class="settings-section-title">📐 التخطيط والسلوك</h4>
                    
                    <div class="setting-item">
                        <label for="layoutMode">نمط العرض</label>
                        <select id="layoutMode" class="layout-mode-select">
                            <option value="grid">شبكة</option>
                            <option value="list">قائمة</option>
                            <option value="compact" selected>مضغوط</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="compactMode">الوضع المضغوط</label>
                        <label class="switch">
                            <input type="checkbox" id="compactMode" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="animationsEnabled">تفعيل الرسوم المتحركة</label>
                        <label class="switch">
                            <input type="checkbox" id="animationsEnabled" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="highContrast">التباين العالي</label>
                        <label class="switch">
                            <input type="checkbox" id="highContrast">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="settings-actions">
                    <button class="reset-settings-btn" onclick="app.resetCustomizations()">
                        <i class="fas fa-undo"></i>
                        إعادة تعيين التخصيصات
                    </button>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="modal" id="adminModal">
        <div class="modal-content admin-content">
            <div class="modal-header">
                <h3>لوحة التحكم</h3>
                <button class="close-btn" onclick="closeAdminPanel()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="channels">إدارة القنوات</button>
                <button class="admin-tab" data-tab="add">إضافة قناة</button>
                <button class="admin-tab" data-tab="categories">إدارة الفئات</button>
                <button class="admin-tab" data-tab="settings">إعدادات عامة</button>
            </div>
            <div class="admin-body">
                <!-- Channels Management Tab -->
                <div class="admin-tab-content active" id="channelsTab">
                    <div class="admin-search">
                        <input type="text" placeholder="البحث في القنوات..." id="adminSearchInput">
                    </div>
                    <div class="channels-list" id="adminChannelsList">
                        <!-- Admin channels list will be loaded here -->
                    </div>
                    <div class="save-order-container" id="saveOrderContainer" style="display: none;">
                        <div class="order-info">
                            <i class="fas fa-info-circle"></i>
                            يمكنك سحب وإفلات القنوات أو استخدام أزرار الأسهم لترتيبها حسب رغبتك
                        </div>
                        <div class="save-order-actions">
                            <button class="save-order-btn" id="saveOrderBtn" onclick="app.saveChannelsOrder()">
                                <i class="fas fa-save"></i> حفظ الترتيب الجديد
                            </button>
                            <button class="reset-order-btn" onclick="app.resetChannelsOrder()">
                                <i class="fas fa-undo"></i> إعادة تعيين
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Add Channel Tab -->
                <div class="admin-tab-content" id="addTab">
                    <form class="add-channel-form" id="addChannelForm">
                        <div class="form-group">
                            <label for="channelName">اسم القناة</label>
                            <input type="text" id="channelName" required>
                        </div>
                        <div class="form-group">
                            <label for="channelUrl">رابط البث (m3u8)</label>
                            <input type="url" id="channelUrl" required>
                        </div>
                        <div class="form-group">
                            <label for="channelLogo">رابط الشعار</label>
                            <input type="url" id="channelLogo" required>
                        </div>
                        <div class="form-group">
                            <label for="channelCategory">الفئة</label>
                            <select id="channelCategory" required>
                                <option value="news">الأخبار</option>
                                <option value="entertainment">الترفيه</option>
                                <option value="sports">الرياضة</option>
                                <option value="religious">الدينية</option>
                                <option value="music">الموسيقى</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="channelCountry">البلد</label>
                            <input type="text" id="channelCountry" required>
                        </div>
                        <button type="submit" class="add-btn">إضافة القناة</button>
                    </form>
                </div>
                
                <!-- Categories Management Tab -->
                <div class="admin-tab-content" id="categoriesTab">
                    <div class="categories-management">
                        <div class="categories-header">
                            <h4>إدارة فئات القنوات</h4>
                            <button class="add-category-btn" onclick="showAddCategoryForm()">
                                <i class="fas fa-plus"></i>
                                إضافة فئة جديدة
                            </button>
                        </div>
                        
                        <!-- Add/Edit Category Form -->
                        <div class="category-form-container" id="categoryFormContainer" style="display: none;">
                            <form class="category-form" id="categoryForm">
                                <h5 id="categoryFormTitle">إضافة فئة جديدة</h5>
                                <div class="form-group">
                                    <label for="categoryKey">مفتاح الفئة (بالإنجليزية)</label>
                                    <input type="text" id="categoryKey" required placeholder="news, sports, entertainment">
                                    <small>يُستخدم في النظام - يجب أن يكون باللغة الإنجليزية بدون مسافات</small>
                                </div>
                                <div class="form-group">
                                    <label for="categoryName">اسم الفئة (بالعربية)</label>
                                    <input type="text" id="categoryName" required placeholder="الأخبار، الرياضة، الترفيه">
                                </div>
                                <div class="form-group">
                                    <label for="categoryIcon">أيقونة الفئة</label>
                                    <select id="categoryIcon" required>
                                        <option value="fas fa-newspaper">📰 الأخبار</option>
                                        <option value="fas fa-tv">📺 الترفيه</option>
                                        <option value="fas fa-futbol">⚽ الرياضة</option>
                                        <option value="fas fa-pray">🕌 الدينية</option>
                                        <option value="fas fa-music">🎵 الموسيقى</option>
                                        <option value="fas fa-film">🎬 الأفلام</option>
                                        <option value="fas fa-child">👶 الأطفال</option>
                                        <option value="fas fa-graduation-cap">📚 التعليمية</option>
                                        <option value="fas fa-utensils">🍽️ الطبخ</option>
                                        <option value="fas fa-globe">🌍 الدولية</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="save-category-btn" id="saveCategoryBtn">
                                        <i class="fas fa-save"></i>
                                        حفظ الفئة
                                    </button>
                                    <button type="button" class="cancel-category-btn" onclick="hideCategoryForm()">
                                        <i class="fas fa-times"></i>
                                        إلغاء
                                    </button>
                                </div>
                                <input type="hidden" id="editingCategoryIndex" value="-1">
                            </form>
                        </div>
                        
                        <!-- Categories List -->
                        <div class="categories-list" id="categoriesList">
                            <!-- Categories will be rendered here -->
                        </div>
                    </div>
                </div>
                
                <!-- General Settings Tab -->
                <div class="admin-tab-content" id="settingsTab">
                    <!-- Basic Settings Section -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-cog"></i>
                            <h3>الإعدادات الأساسية</h3>
                        </div>
                        <div class="settings-section-content">
                            <div class="enhanced-setting-item">
                                <div class="setting-label-group">
                                    <label for="appTitle">عنوان التطبيق</label>
                                    <small>العنوان الذي سيظهر في شريط العنوان</small>
                                </div>
                                <input type="text" id="appTitle" value="القنوات الفضائية العربية" class="enhanced-input">
                            </div>
                            
                            <div class="enhanced-setting-item">
                                <div class="setting-label-group">
                                    <label for="maxChannels">الحد الأقصى للقنوات</label>
                                    <small>عدد القنوات المسموح بإضافتها</small>
                                </div>
                                <input type="number" id="maxChannels" value="100" class="enhanced-input" min="10" max="1000">
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- Save Button -->
                    <div class="settings-save-section">
                        <button class="enhanced-save-btn" onclick="saveGeneralSettings()">
                            <i class="fas fa-save"></i>
                            <span>حفظ الإعدادات</span>
                        </button>
                    </div>
                    
                    <!-- Remote Storage Settings -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-cloud"></i>
                            <h3>التخزين السحابي</h3>
                        </div>
                        <div class="settings-section-content">
                            <!-- Quick Setup Section -->
                            <div class="quick-setup-section">
                                <div class="setup-wizard-header">
                                    <h4><i class="fas fa-magic"></i> الإعداد السريع للمبتدئين</h4>
                                    <p>دعنا نساعدك في إعداد التخزين السحابي خطوة بخطوة</p>
                                </div>
                                
                                <div class="setup-steps">
                                    <div class="setup-step active" data-step="1">
                                        <div class="step-number">1</div>
                                        <div class="step-content">
                                            <h5>إنشاء مستودع جديد</h5>
                                            <p>أنشئ مستودعاً جديداً على GitHub أو GitLab</p>
                                            <div class="step-actions">
                                                <button class="step-btn github-btn" onclick="app.openRepositoryCreation('github')">
                                                    <i class="fab fa-github"></i>
                                                    إنشاء على GitHub
                                                </button>
                                                <button class="step-btn gitlab-btn" onclick="app.openRepositoryCreation('gitlab')">
                                                    <i class="fab fa-gitlab"></i>
                                                    إنشاء على GitLab
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="setup-step" data-step="2">
                                        <div class="step-number">2</div>
                                        <div class="step-content">
                                            <h5>إنشاء رمز الوصول</h5>
                                            <p>أنشئ رمز وصول شخصي للاتصال بالمستودع</p>
                                            <div class="step-actions">
                                                <button class="step-btn token-btn" onclick="app.openTokenCreation()">
                                                    <i class="fas fa-key"></i>
                                                    إنشاء رمز الوصول
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="setup-step" data-step="3">
                                        <div class="step-number">3</div>
                                        <div class="step-content">
                                            <h5>إدخال البيانات</h5>
                                            <p>أدخل معلومات المستودع ورمز الوصول</p>
                                            <div class="step-actions">
                                                <button class="step-btn config-btn" onclick="app.showAdvancedConfig()">
                                                    <i class="fas fa-cog"></i>
                                                    إدخال البيانات
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="setup-help">
                                    <button class="help-btn" onclick="app.showSetupHelp()">
                                        <i class="fas fa-question-circle"></i>
                                        أحتاج مساعدة في الإعداد
                                    </button>
                                    <button class="help-btn auto-detect-btn" onclick="app.showAutoDetect()">
                                        <i class="fas fa-search"></i>
                                        البحث عن مستودعات موجودة
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Advanced Configuration (Hidden by default) -->
                            <div class="advanced-config-section" id="advancedConfigSection" style="display: none;">
                                <div class="config-header">
                                    <h4><i class="fas fa-cogs"></i> الإعدادات المتقدمة</h4>
                                    <button class="toggle-simple-btn" onclick="app.showSimpleConfig()">
                                        <i class="fas fa-arrow-up"></i>
                                        العودة للإعداد السريع
                                    </button>
                                </div>
                                
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="enableRemoteStorage">تفعيل التخزين السحابي</label>
                                        <small>مزامنة البيانات مع GitHub أو GitLab</small>
                                    </div>
                                    <label class="enhanced-switch">
                                        <input type="checkbox" id="enableRemoteStorage">
                                        <span class="enhanced-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="remote-storage-config" id="remoteStorageConfig" style="display: none;">
                                    <div class="enhanced-setting-item">
                                        <div class="setting-label-group">
                                            <label for="storageProvider">مزود الخدمة</label>
                                            <small>اختر منصة التخزين السحابي</small>
                                        </div>
                                        <select id="storageProvider" class="enhanced-select">
                                            <option value="github">GitHub</option>
                                            <option value="gitlab">GitLab</option>
                                        </select>
                                    </div>
                                    
                                    <div class="enhanced-setting-item">
                                        <div class="setting-label-group">
                                            <label for="repositoryUrl">رابط المستودع</label>
                                            <small>مثل: username/repository-name</small>
                                        </div>
                                        <div class="repository-input-container">
                                            <input type="text" id="repositoryUrl" placeholder="username/repository-name" class="enhanced-input">
                                            <button class="fetch-repo-btn" onclick="app.fetchUserRepositories()" title="جلب المستودعات من اسم المستخدم">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                        <div class="input-help">
                                            <i class="fas fa-info-circle"></i>
                                            مثال: myusername/tv-channels أو استخدم زر البحث لجلب المستودعات
                                        </div>
                                        <div class="repo-suggestions" id="repoSuggestions" style="display: none;">
                                            <!-- Repository suggestions will appear here -->
                                        </div>
                                    </div>
                                    
                                    <div class="enhanced-setting-item">
                                        <div class="setting-label-group">
                                            <label for="accessToken">رمز الوصول (Token)</label>
                                            <small>يمكنك إنشاء رمز وصول من إعدادات حسابك</small>
                                        </div>
                                        <div class="token-input-container">
                                            <input type="password" id="accessToken" placeholder="أدخل رمز الوصول الشخصي" class="enhanced-input">
                                            <button class="validate-token-btn" onclick="app.validateToken()" title="التحقق من صحة الرمز">
                                                <i class="fas fa-check-circle"></i>
                                            </button>
                                            <button class="toggle-token-visibility" onclick="app.toggleTokenVisibility()" title="إظهار/إخفاء الرمز">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="input-help">
                                            <i class="fas fa-shield-alt"></i>
                                            هذا الرمز آمن ويُحفظ محلياً فقط
                                        </div>
                                        <div class="token-status" id="tokenStatus" style="display: none;">
                                            <!-- Token validation status will appear here -->
                                        </div>
                                    </div>
                                    
                                    <div class="enhanced-setting-item">
                                        <div class="setting-label-group">
                                            <label for="branchName">اسم الفرع</label>
                                            <small>اسم الفرع في المستودع</small>
                                        </div>
                                        <input type="text" id="branchName" value="main" placeholder="main" class="enhanced-input">
                                    </div>
                                    
                                    <div class="enhanced-setting-item">
                                        <div class="setting-label-group">
                                            <label for="autoSync">مزامنة تلقائية</label>
                                            <small>مزامنة البيانات تلقائياً عند التغيير</small>
                                        </div>
                                        <label class="enhanced-switch">
                                            <input type="checkbox" id="autoSync" checked>
                                            <span class="enhanced-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="remote-storage-actions">
                                        <button class="test-connection-btn" onclick="app.testConnection()">
                                            <i class="fas fa-link"></i>
                                            اختبار الاتصال
                                        </button>
                                        <button class="save-remote-settings-btn" onclick="app.saveRemoteStorageSettingsUI()">
                                            <i class="fas fa-save"></i>
                                            حفظ الإعدادات
                                        </button>
                                        <button class="sync-now-btn" onclick="app.manualSync()">
                                            <i class="fas fa-sync-alt"></i>
                                            مزامنة الآن
                                        </button>
                                    </div>
                                    
                                    <div class="sync-status" id="syncStatus">
                                        <p><strong>حالة المزامنة:</strong> <span id="syncStatusText">غير محدد</span></p>
                                        <p><strong>آخر مزامنة:</strong> <span id="lastSyncTime">لم يتم</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Backup & Restore Section -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>النسخ الاحتياطي والاستعادة</h3>
                        </div>
                        <div class="settings-section-content">
                            <div class="backup-intro">
                                <p>احفظ نسخة احتياطية من جميع بياناتك أو استعدها من نسخة سابقة</p>
                            </div>
                            
                            <div class="backup-actions-grid">
                                <button class="enhanced-backup-btn export-btn" onclick="app.createFullBackup()">
                                    <i class="fas fa-download"></i>
                                    <span>إنشاء نسخة احتياطية كاملة</span>
                                    <small>حفظ جميع القنوات والإعدادات</small>
                                </button>
                                
                                <button class="enhanced-backup-btn import-btn" onclick="app.restoreFromBackup()">
                                    <i class="fas fa-upload"></i>
                                    <span>استعادة من النسخة الاحتياطية</span>
                                    <small>استعادة البيانات من ملف</small>
                                </button>
                                
                                <button class="enhanced-backup-btn sync-backup-btn" onclick="app.syncToCloudBackup()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <span>رفع النسخة الاحتياطية للسحابة</span>
                                    <small>حفظ النسخة الاحتياطية في المستودع</small>
                                </button>
                                
                                <button class="enhanced-backup-btn download-backup-btn" onclick="app.downloadCloudBackup()">
                                    <i class="fas fa-cloud-download-alt"></i>
                                    <span>تحميل النسخة الاحتياطية من السحابة</span>
                                    <small>استعادة من النسخة السحابية</small>
                                </button>
                            </div>
                            
                            <div class="backup-info">
                                <h5><i class="fas fa-info-circle"></i> معلومات النسخ الاحتياطي:</h5>
                                <ul>
                                    <li>النسخة الاحتياطية تحتوي على جميع القنوات والإعدادات والمفضلة</li>
                                    <li>يمكنك إنشاء نسخ احتياطية متعددة في أوقات مختلفة</li>
                                    <li>النسخ السحابية تُحفظ تلقائياً في المستودع المحدد</li>
                                    <li>يمكن استعادة البيانات على أي جهاز آخر</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Diagnostic Tools Section -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-tools"></i>
                            <h3>أدوات التشخيص</h3>
                        </div>
                        <div class="settings-section-content">
                            <div class="diagnostic-tools-grid">
                                <button class="enhanced-diagnostic-btn diagnostic-btn" onclick="debugStorage()">
                                    <i class="fas fa-stethoscope"></i>
                                    <span>تشخيص التخزين</span>
                                    <small>فحص حالة البيانات المحفوظة</small>
                                </button>
                                <button class="enhanced-diagnostic-btn export-btn" onclick="app.exportChannels()">
                                    <i class="fas fa-download"></i>
                                    <span>تصدير القنوات فقط</span>
                                    <small>حفظ القنوات فقط</small>
                                </button>
                                <button class="enhanced-diagnostic-btn import-btn" onclick="app.importChannels()">
                                    <i class="fas fa-upload"></i>
                                    <span>استيراد القنوات فقط</span>
                                    <small>استعادة القنوات فقط</small>
                                </button>
                            </div>
                        </div>
                    </div>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;" />
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Storage Diagnostic Modal -->
    <div class="modal" id="diagnosticModal">
        <div class="modal-content diagnostic-content">
            <div class="modal-header">
                <h3>📊 تشخيص التخزين</h3>
                <button class="close-btn" onclick="closeDiagnosticModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="diagnostic-body">
                <div class="diagnostic-section">
                    <h4><i class="fas fa-memory"></i> الذاكرة والفلاتر</h4>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">محملة/مفلترة:</span>
                        <span class="diagnostic-value" id="memoryChannelsCount">-</span> / <span class="diagnostic-value" id="filteredChannelsCount">-</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">الفئة النشطة:</span>
                        <span class="diagnostic-value" id="activeCategory">-</span>
                    </div>
                </div>

                <div class="diagnostic-section">
                    <h4><i class="fas fa-database"></i> التخزين والحفظ</h4>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">محفوظة/حجم:</span>
                        <span class="diagnostic-value" id="savedChannelsCount">-</span> (<span class="diagnostic-value" id="dataSize">-</span>)
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">التزامن:</span>
                        <span class="diagnostic-value" id="syncStatus">-</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">آخر حفظ:</span>
                        <span class="diagnostic-value" id="lastSaved">-</span>
                    </div>
                </div>

                <div class="diagnostic-actions">
                    <button class="diagnostic-btn export-btn" onclick="app.exportChannels()">
                        <i class="fas fa-download"></i> تصدير
                    </button>
                    <button class="diagnostic-btn refresh-btn" onclick="refreshDiagnostic()">
                        <i class="fas fa-sync-alt"></i> تحديث
                    </button>
                    <button class="diagnostic-btn console-btn" onclick="openConsoleInfo()">
                        <i class="fas fa-terminal"></i> Console
                    </button>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Auto Detect Modal -->
    <div class="modal" id="autoDetectModal">
        <div class="modal-content auto-detect-content">
            <div class="modal-header">
                <h3><i class="fas fa-search"></i> البحث عن المستودعات</h3>
                <button class="close-btn" onclick="closeAutoDetect()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="auto-detect-body">
                <div class="detect-intro">
                    <p>يمكننا مساعدتك في العثور على المستودعات الموجودة في حسابك</p>
                </div>
                
                <div class="detect-form">
                    <div class="form-group">
                        <label for="detectProvider">اختر المنصة</label>
                        <select id="detectProvider" class="enhanced-select">
                            <option value="github">GitHub</option>
                            <option value="gitlab">GitLab</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="detectUsername">اسم المستخدم</label>
                        <input type="text" id="detectUsername" placeholder="أدخل اسم المستخدم" class="enhanced-input">
                        <div class="input-help">
                            <i class="fas fa-info-circle"></i>
                            اسم المستخدم في GitHub أو GitLab
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="detectToken">رمز الوصول (اختياري)</label>
                        <input type="password" id="detectToken" placeholder="رمز الوصول للوصول للمستودعات الخاصة" class="enhanced-input">
                        <div class="input-help">
                            <i class="fas fa-shield-alt"></i>
                            بدون رمز الوصول، ستظهر المستودعات العامة فقط
                        </div>
                    </div>
                    
                    <button class="detect-btn" onclick="app.detectRepositories()">
                        <i class="fas fa-search"></i>
                        البحث عن المستودعات
                    </button>
                </div>
                
                <div class="detect-results" id="detectResults" style="display: none;">
                    <h4>المستودعات الموجودة:</h4>
                    <div class="repositories-list" id="repositoriesList">
                        <!-- Results will be populated here -->
                    </div>
                </div>
                
                <div class="detect-loading" id="detectLoading" style="display: none;">
                    <div class="spinner"></div>
                    <p>جاري البحث عن المستودعات...</p>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Setup Help Modal -->
    <div class="modal" id="setupHelpModal">
        <div class="modal-content setup-help-content">
            <div class="modal-header">
                <h3><i class="fas fa-graduation-cap"></i> دليل الإعداد السحابي</h3>
                <button class="close-btn" onclick="closeSetupHelp()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="setup-help-body">
                <div class="help-tabs">
                    <button class="help-tab active" data-tab="github">GitHub</button>
                    <button class="help-tab" data-tab="gitlab">GitLab</button>
                </div>
                
                <div class="help-content">
                    <!-- GitHub Help -->
                    <div class="help-tab-content active" id="githubHelp">
                        <div class="help-step">
                            <h4><span class="step-number">1</span> إنشاء مستودع جديد</h4>
                            <div class="step-details">
                                <p>1. اذهب إلى <a href="https://github.com/new" target="_blank">GitHub</a></p>
                                <p>2. انقر على "New repository"</p>
                                <p>3. أدخل اسم المستودع (مثل: tv-channels)</p>
                                <p>4. اختر "Public" أو "Private"</p>
                                <p>5. انقر "Create repository"</p>
                            </div>
                        </div>
                        
                        <div class="help-step">
                            <h4><span class="step-number">2</span> إنشاء رمز الوصول</h4>
                            <div class="step-details">
                                <p>1. اذهب إلى Settings → Developer settings</p>
                                <p>2. انقر "Personal access tokens" → "Tokens (classic)"</p>
                                <p>3. انقر "Generate new token (classic)"</p>
                                <p>4. اختر الصلاحيات: <code>repo</code> (للمستودعات الخاصة) أو <code>public_repo</code> (للمستودعات العامة)</p>
                                <p>5. انقر "Generate token"</p>
                                <p>6. انسخ الرمز واحفظه بأمان</p>
                            </div>
                        </div>
                        
                        <div class="help-step">
                            <h4><span class="step-number">3</span> إدخال البيانات في التطبيق</h4>
                            <div class="step-details">
                                <p>1. اختر "GitHub" كمزود الخدمة</p>
                                <p>2. أدخل رابط المستودع: <code>username/repository-name</code></p>
                                <p>3. أدخل رمز الوصول الذي أنشأته</p>
                                <p>4. انقر "اختبار الاتصال" للتأكد</p>
                                <p>5. انقر "حفظ الإعدادات"</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- GitLab Help -->
                    <div class="help-tab-content" id="gitlabHelp">
                        <div class="help-step">
                            <h4><span class="step-number">1</span> إنشاء مشروع جديد</h4>
                            <div class="step-details">
                                <p>1. اذهب إلى <a href="https://gitlab.com/projects/new" target="_blank">GitLab</a></p>
                                <p>2. انقر "Create blank project"</p>
                                <p>3. أدخل اسم المشروع (مثل: tv-channels)</p>
                                <p>4. اختر مستوى الخصوصية</p>
                                <p>5. انقر "Create project"</p>
                            </div>
                        </div>
                        
                        <div class="help-step">
                            <h4><span class="step-number">2</span> إنشاء رمز الوصول</h4>
                            <div class="step-details">
                                <p>1. اذهب إلى User Settings → Access Tokens</p>
                                <p>2. أدخل اسم للرمز (مثل: TV App)</p>
                                <p>3. اختر الصلاحيات: <code>api</code> و <code>write_repository</code></p>
                                <p>4. انقر "Create personal access token"</p>
                                <p>5. انسخ الرمز واحفظه بأمان</p>
                            </div>
                        </div>
                        
                        <div class="help-step">
                            <h4><span class="step-number">3</span> إدخال البيانات في التطبيق</h4>
                            <div class="step-details">
                                <p>1. اختر "GitLab" كمزود الخدمة</p>
                                <p>2. أدخل رابط المستودع: <code>username/project-name</code></p>
                                <p>3. أدخل رمز الوصول الذي أنشأته</p>
                                <p>4. انقر "اختبار الاتصال" للتأكد</p>
                                <p>5. انقر "حفظ الإعدادات"</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="help-footer">
                    <div class="help-tips">
                        <h5><i class="fas fa-lightbulb"></i> نصائح مهمة:</h5>
                        <ul>
                            <li>احفظ رمز الوصول في مكان آمن - لن تتمكن من رؤيته مرة أخرى</li>
                            <li>يمكنك استخدام مستودع عام أو خاص حسب احتياجاتك</li>
                            <li>المزامنة التلقائية تحفظ بياناتك عند كل تغيير</li>
                            <li>يمكنك إيقاف المزامنة التلقائية واستخدام المزامنة اليدوية</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- HLS.js Library for video streaming -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="script.js"></script>
</body>
</html>

