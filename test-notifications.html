<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار نظام الإشعارات</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            padding: 20px;
            background: var(--background-dark);
            color: var(--text-primary);
            font-family: 'Cairo', sans-serif;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .test-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .test-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .test-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }
        
        .test-btn.success {
            background: #10b981;
        }
        
        .test-btn.warning {
            background: #f59e0b;
        }
        
        .test-btn.error {
            background: #ef4444;
        }
        
        .test-btn.info {
            background: #3b82f6;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; margin-bottom: 30px;">اختبار نظام الإشعارات المحسن</h1>
        
        <div class="test-section">
            <h2 class="test-title">الإشعارات الأساسية</h2>
            <div class="test-buttons">
                <button class="test-btn success" onclick="testBasicNotification('success')">
                    إشعار نجاح
                </button>
                <button class="test-btn error" onclick="testBasicNotification('error')">
                    إشعار خطأ
                </button>
                <button class="test-btn warning" onclick="testBasicNotification('warning')">
                    إشعار تحذير
                </button>
                <button class="test-btn info" onclick="testBasicNotification('info')">
                    إشعار معلومات
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">الإشعارات المحسنة</h2>
            <div class="test-buttons">
                <button class="test-btn success" onclick="testNewChannelsNotification()">
                    قنوات جديدة
                </button>
                <button class="test-btn info" onclick="testUpdatedChannelsNotification()">
                    قنوات محدثة
                </button>
                <button class="test-btn warning" onclick="testRemovedChannelsNotification()">
                    قنوات محذوفة
                </button>
                <button class="test-btn info" onclick="testUpdateAvailableNotification()">
                    تحديثات متاحة
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">اختبار التمييز البصري</h2>
            <div class="test-buttons">
                <button class="test-btn" onclick="testChannelHighlighting()">
                    تسليط الضوء على القنوات
                </button>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <script>
        // Mock app object for testing
        const mockApp = {
            showNotification: function(title, message, type, duration = 4000) {
                const container = document.getElementById('notificationsContainer');
                if (!container) return;

                const notification = document.createElement('div');
                notification.className = 'notification entering';
                
                const notificationId = Date.now() + Math.random();
                notification.dataset.id = notificationId;

                const icons = {
                    success: '✓',
                    error: '✕',
                    warning: '⚠',
                    info: 'ℹ'
                };

                notification.innerHTML = `
                    <div class="notification-icon ${type}">
                        ${icons[type]}
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close" onclick="closeNotification('${notificationId}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                container.appendChild(notification);

                setTimeout(() => {
                    notification.classList.remove('entering');
                    notification.classList.add('entered');
                }, 100);

                if (duration > 0) {
                    setTimeout(() => {
                        closeNotification(notificationId);
                    }, duration);
                }

                return notificationId;
            },

            showEnhancedNotification: function(title, message, type, duration, options = {}) {
                const container = document.getElementById('notificationsContainer');
                if (!container) return;

                const notification = document.createElement('div');
                notification.className = 'notification enhanced-notification entering';
                
                const notificationId = Date.now() + Math.random();
                notification.dataset.id = notificationId;

                const icons = {
                    success: '✓',
                    error: '✕',
                    warning: '⚠',
                    info: 'ℹ'
                };

                let detailsHtml = '';
                if (options.showDetails && options.channels) {
                    detailsHtml = `
                        <div class="notification-details">
                            <div class="channels-list">
                                ${options.channels.map(channel => `
                                    <div class="channel-item">
                                        <img src="${channel.logo}" alt="${channel.name}" class="channel-logo-small" 
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAxMkMxNS41ODU4IDEyIDEyIDE1LjU4NTggMTIgMjBDMTIgMjQuNDE0MiAxNS41ODU4IDI4IDIwIDI4QzI0LjQxNDIgMjggMjggMjQuNDE0MiAyOCAyMEMyOCAxNS41ODU4IDI0LjQxNDIgMTIgMjAgMTJaIiBmaWxsPSIjNjY3Nzg4Ii8+CjxwYXRoIGQ9Ik0yMCAxNkMxOC44OTU0IDE2IDE4IDE2Ljg5NTQgMTggMThWMTlIMjJWMThDMjIgMTYuODk1NCAyMS4xMDQ2IDE2IDIwIDE2WiIgZmlsbD0iI0ZGRkZGRiIvPgo8cGF0aCBkPSJNMjAgMjJDMjAuNTUyMyAyMiAyMSAyMS41NTIzIDIxIDIxQzIxIDIwLjQ0NzcgMjAuNTUyMyAyMCAyMCAyMEMxOS40NDc3IDIwIDE5IDIwLjQ0NzcgMTkgMjFDMjAgMjEuNTUyMyAxOS40NDc3IDIyIDIwIDIyWiIgZmlsbD0iI0ZGRkZGRiIvPgo8L3N2Zz4K'">
                                        <span class="channel-name">${channel.name}</span>
                                        <span class="channel-category">${channel.category}</span>
                                    </div>
                                `).join('')}
                            </div>
                            ${options.actionText ? `
                                <button class="notification-action-btn" onclick="handleNotificationAction('${notificationId}')">
                                    ${options.actionText}
                                </button>
                            ` : ''}
                        </div>
                    `;
                }

                notification.innerHTML = `
                    <div class="notification-icon ${type}">
                        ${icons[type]}
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        <div class="notification-message">${message}</div>
                        ${detailsHtml}
                    </div>
                    <button class="notification-close" onclick="closeNotification('${notificationId}')">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                container.appendChild(notification);

                setTimeout(() => {
                    notification.classList.remove('entering');
                    notification.classList.add('entered');
                }, 100);

                if (duration > 0) {
                    setTimeout(() => {
                        closeNotification(notificationId);
                    }, duration);
                }

                return notificationId;
            }
        };

        // Test functions
        function testBasicNotification(type) {
            const messages = {
                success: 'تم تنفيذ العملية بنجاح!',
                error: 'حدث خطأ أثناء تنفيذ العملية',
                warning: 'تحذير: يرجى مراجعة الإعدادات',
                info: 'معلومة: تم تحديث البيانات'
            };
            
            mockApp.showNotification(
                type === 'success' ? 'نجح!' : 
                type === 'error' ? 'خطأ!' : 
                type === 'warning' ? 'تحذير!' : 'معلومة',
                messages[type],
                type
            );
        }

        function testNewChannelsNotification() {
            const newChannels = [
                { id: '1', name: 'قناة الجزيرة', logo: 'https://via.placeholder.com/40', category: 'الأخبار' },
                { id: '2', name: 'قناة العربية', logo: 'https://via.placeholder.com/40', category: 'الأخبار' },
                { id: '3', name: 'قناة MBC', logo: 'https://via.placeholder.com/40', category: 'الترفيه' }
            ];
            
            mockApp.showEnhancedNotification(
                'قنوات جديدة! 🆕',
                'تمت إضافة 3 قنوات جديدة',
                'success',
                8000,
                {
                    showDetails: true,
                    channels: newChannels,
                    actionText: 'عرض القنوات الجديدة',
                    actionCallback: () => alert('تم النقر على عرض القنوات الجديدة')
                }
            );
        }

        function testUpdatedChannelsNotification() {
            const updatedChannels = [
                { id: '1', name: 'قناة الجزيرة', logo: 'https://via.placeholder.com/40', category: 'الأخبار' },
                { id: '2', name: 'قناة العربية', logo: 'https://via.placeholder.com/40', category: 'الأخبار' }
            ];
            
            mockApp.showEnhancedNotification(
                'تحديث القنوات! 🔄',
                'تم تحديث قناتين',
                'info',
                6000,
                {
                    showDetails: true,
                    channels: updatedChannels,
                    actionText: 'عرض التحديثات',
                    actionCallback: () => alert('تم النقر على عرض التحديثات')
                }
            );
        }

        function testRemovedChannelsNotification() {
            const removedChannels = [
                { id: '1', name: 'قناة قديمة', logo: 'https://via.placeholder.com/40', category: 'الأخبار' }
            ];
            
            mockApp.showEnhancedNotification(
                'قنوات محذوفة! ❌',
                'تم حذف قناة واحدة',
                'warning',
                5000,
                {
                    showDetails: true,
                    channels: removedChannels,
                    actionText: 'عرض التفاصيل',
                    actionCallback: () => alert('تم النقر على عرض التفاصيل')
                }
            );
        }

        function testUpdateAvailableNotification() {
            mockApp.showEnhancedNotification(
                'تحديثات متاحة! 🔔',
                'يوجد 5 قنوات جديدة متاحة للتحديث',
                'info',
                10000,
                {
                    showDetails: false,
                    actionText: 'تحديث الآن',
                    actionCallback: () => alert('تم النقر على تحديث الآن')
                }
            );
        }

        function testChannelHighlighting() {
            // إنشاء قنوات وهمية للاختبار
            const testChannels = document.querySelectorAll('.test-section');
            testChannels.forEach((section, index) => {
                section.classList.add('highlighted');
                setTimeout(() => {
                    section.classList.remove('highlighted');
                }, 2000);
            });
            
            mockApp.showNotification('تمييز القنوات', 'تم تسليط الضوء على القنوات لمدة ثانيتين', 'info');
        }

        function closeNotification(id) {
            const notification = document.querySelector(`[data-id="${id}"]`);
            if (notification) {
                notification.classList.add('exiting');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }
        }

        function handleNotificationAction(id) {
            alert('تم تنفيذ الإجراء المطلوب!');
            closeNotification(id);
        }
    </script>
</body>
</html>
